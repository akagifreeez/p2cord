# P2Cord 開発ロードマップ

## Discord機能 - 未対応一覧

### ❌ 未対応
| 機能                 | 説明                                           | 優先度 |
| -------------------- | ---------------------------------------------- | ------ |
| メッセージ送信       | テキストチャンネルへのメッセージ投稿           | 中     |
| リアクション         | メッセージへの絵文字リアクション               | 低     |
| メンション           | @ユーザー、@ロール、@everyone                  | 低     |
| 添付ファイル         | 画像/ファイルのアップロード・表示              | 中     |
| スレッド             | メッセージスレッドの表示・参加                 | 低     |
| DM                   | ダイレクトメッセージ                           | 中     |
| ユーザープロファイル | アバター・ステータス表示                       | 低     |
| サーバー設定         | チャンネル作成・権限管理                       | 低     |
| 通知                 | メンション・DM通知                             | 中     |
| 検索                 | メッセージ検索（ローカルキャッシュのみ対応中） | 低     |
| Embed                | リンクプレビュー、埋め込みコンテンツ           | 低     |
| カスタム絵文字       | サーバー絵文字の表示・使用                     | 低     |

### ✅ 対応済み
| 機能                 | 説明                               |
| -------------------- | ---------------------------------- |
| ログイン             | Discordトークンによる認証          |
| サーバー一覧         | 参加サーバーの表示                 |
| チャンネル一覧       | テキスト/ボイスチャンネルの表示    |
| メッセージ履歴       | テキストチャンネルのメッセージ閲覧 |
| Gateway接続          | リアルタイムイベント受信           |
| メッセージキャッシュ | SQLiteによるローカル保存           |

---

## ボイスチャット機能 - 開発予定

### 🔄 実装予定（優先度高）
| 機能             | 説明                                    | 状態     |
| ---------------- | --------------------------------------- | -------- |
| 画面共有         | デスクトップ/ウィンドウのストリーミング | 未着手   |
| 複数人通話       | 3人以上のFull Mesh通話                  | 設計済み |
| 音声デバイス選択 | 入力/出力デバイスの選択UI               | 一部対応 |
| 音量調整         | マスター音量・個別音量                  | 未着手   |
| ノイズキャンセル | AIベースのノイズ除去                    | 未着手   |

### 🔄 実装予定（優先度中）
| 機能             | 説明                          | 状態     |
| ---------------- | ----------------------------- | -------- |
| Push-to-Talk     | キーを押している間だけ送信    | 未着手   |
| エコーキャンセル | 音声フィードバック防止        | 未着手   |
| 自動ゲイン調整   | マイク入力レベル自動調整      | 未着手   |
| 接続品質表示     | RTT/パケットロス/ビットレート | 一部対応 |
| TURN対応         | NAT越え（設定UIなし）         | 未着手   |

### 🔄 実装予定（優先度低）
| 機能                 | 説明                 | 状態     |
| -------------------- | -------------------- | -------- |
| リモートコントロール | 相手のPC操作         | 設計済み |
| 録音                 | 通話録音             | 未着手   |
| 文字起こし           | リアルタイム音声認識 | 未着手   |
| バーチャル背景       | カメラ映像の背景置換 | 未着手   |

### ✅ 実装済み
| 機能               | 説明                         |
| ------------------ | ---------------------------- |
| P2P通話            | WebRTC直接接続               |
| マイクON/OFF       | ミュート切替                 |
| スピーカーミュート | デafen機能                   |
| VAD                | 発話検出                     |
| ハートビート       | 接続状態監視（2秒間隔）      |
| 自動再接続         | 切断時のPeerConnection再作成 |
| セッション管理     | 入室/退室の正常処理          |
| Opusコーデック     | 高品質音声圧縮               |

---

## 技術的課題

### 要調査
- [ ] webrtc-rsのメディアストリーム取得方法（画面共有用）
- [ ] 複数TrackのMultiplex対応
- [ ] TURNサーバー設定の永続化

### 既知の制限
- Discordの公式ボイスサーバーは使用不可（独自P2Pのみ）
- ユーザートークンが必要（Bot tokenは非対応）

---

*最終更新: 2026-01-13*
